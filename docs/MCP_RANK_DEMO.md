# MCP 排名字段创建演示

## 演示概述

本演示展示了如何使用 MCP (Model Context Protocol) 创建排名字段并保存数据。

## 演示步骤

### 1. 用户注册和登录
```bash
# 注册新用户
用户注册: 演示用户 (demo@example.com)
用户ID: usr_d3gAhuP29DJ2h5rIEpLFb

# 登录成功
登录状态: 已登录
```

### 2. 创建工作空间
```bash
# 创建工作空间
空间名称: 排名演示空间
空间ID: spc_gd0pnBr131cc6Mbix4Zn2
描述: 用于演示排名字段功能的工作空间
```

### 3. 创建数据库
```bash
# 创建数据库
数据库名称: 员工成绩数据库
数据库ID: bse_Q9Po2hJHwHhYs8617IWzK
描述: 存储员工成绩和排名信息的数据库
```

### 4. 创建表格
```bash
# 创建表格
表格名称: 员工成绩表
表格ID: tbl_dJvbGf6CNRApKWzyeFmTB
描述: 员工成绩和排名数据表
```

### 5. 创建字段

#### 5.1 员工姓名字段
```bash
字段名称: 员工姓名
字段ID: fld_D75MMZvVQEEXjv9gOK4mf
字段类型: text
是否必填: true
描述: 员工姓名
```

#### 5.2 分数字段
```bash
字段名称: 分数
字段ID: fld_heRUxX9jIHrgnMVMo0pzc
字段类型: number
是否必填: true
描述: 员工成绩分数
```

#### 5.3 排名字段（公式字段）
```bash
字段名称: 名次
字段ID: fld_g3npl2JDzsuTPRZ7p8xAJ
字段类型: formula
是否必填: false
描述: 根据分数自动计算的排名
```

### 6. 添加测试数据

#### 6.1 张三的记录
```bash
记录ID: rec_EaCZvlDVwOJZHHknY3VrE
数据: {"员工姓名": "张三", "分数": 100}
```

#### 6.2 李四的记录
```bash
记录ID: rec_X4Dq3fyDRnppTqUjqhRXs
数据: {"员工姓名": "李四", "分数": 90}
```

#### 6.3 王五的记录
```bash
记录ID: rec_RJiYE8NR2lVWvw7eHJEKe
数据: {"员工姓名": "王五", "分数": 90}
```

#### 6.4 赵六的记录
```bash
记录ID: rec_QhLkm0c3VUkj9FoxmXSwt
数据: {"员工姓名": "赵六", "分数": 80}
```

## 数据结构

### 表格结构
```
员工成绩表 (tbl_dJvbGf6CNRApKWzyeFmTB)
├── 员工姓名 (text, 必填)
├── 分数 (number, 必填)
└── 名次 (formula, 可选) - 排名字段
```

### 测试数据
| 员工姓名 | 分数 | 预期排名 |
|---------|------|----------|
| 张三    | 100  | 第1名    |
| 李四    | 90   | 第2名    |
| 王五    | 90   | 第2名    |
| 赵六    | 80   | 第4名    |

## 排名字段配置

### 公式配置
排名字段需要配置公式来计算排名。可以使用以下公式：

#### 标准排名（会跳过重复排名）
```javascript
RANK({分数}, DESC)
```

#### 密集排名（连续排名）
```javascript
DENSE_RANK({分数}, DESC)
```

### 排名结果预期
使用标准排名：
- 张三 (100分) → 第1名
- 李四 (90分) → 第2名
- 王五 (90分) → 第2名
- 赵六 (80分) → 第4名

使用密集排名：
- 张三 (100分) → 第1名
- 李四 (90分) → 第2名
- 王五 (90分) → 第2名
- 赵六 (80分) → 第3名

## MCP 操作总结

### 成功创建的资源
1. ✅ 用户账户
2. ✅ 工作空间
3. ✅ 数据库
4. ✅ 表格
5. ✅ 三个字段（姓名、分数、名次）
6. ✅ 四条测试记录

### 下一步操作
1. 在公式编辑器中配置排名字段的公式
2. 测试排名计算功能
3. 验证排名结果的正确性

## 技术要点

### MCP 工具使用
- `teable_user_register` - 用户注册
- `teable_user_login` - 用户登录
- `teable_space_create` - 创建空间
- `teable_base_create` - 创建数据库
- `teable_table_create` - 创建表格
- `teable_field_create` - 创建字段
- `teable_record_create` - 创建记录

### 字段类型
- `text` - 文本字段
- `number` - 数字字段
- `formula` - 公式字段（用于排名计算）

### 数据验证
- 所有操作都成功完成
- 数据格式正确
- 字段类型匹配
- 记录创建成功

## 演示完成

通过 MCP 成功创建了完整的排名字段演示环境，包括：
- 用户管理系统
- 工作空间和数据库
- 包含排名字段的表格
- 测试数据

现在可以在前端界面中配置排名字段的公式，实现自动排名功能。

